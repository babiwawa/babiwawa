var ee={},q={},ie={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Cache=e.isNonNullObject=e.PROTO_ACTIONS=e.CONSTRUCTOR_ACTIONS=e.preserve=e.ignore=e.error=void 0,e.error="error",e.ignore="ignore",e.preserve="preserve",e.CONSTRUCTOR_ACTIONS=[e.error,e.ignore,e.preserve],e.PROTO_ACTIONS=e.CONSTRUCTOR_ACTIONS;const r=i=>i!==null&&typeof i=="object";e.isNonNullObject=r;class t{constructor(n=1e6/2){this._max=n,this._cache={},this._size=0,this._old={}}get(n){return this.has(n)?this._cache[n]:void 0}set(n,u){return this._size>=this._max&&(this._old=this._cache,this._cache={},this._size=0),this._cache[n]=u,this._size++,u}has(n){return Object.prototype.hasOwnProperty.call(this._cache,n)?!0:Object.prototype.hasOwnProperty.call(this._old,n)?(this._cache[n]=this._old[n],!0):!1}}e.Cache=t})(ie);Object.defineProperty(q,"__esModule",{value:!0});q.newParse=void 0;const y=ie,Ne="bigint",fe="number",_e=/(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])/,me=/(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)/,se={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},je=e=>{let r,t,i;const n={errorOnBigIntDecimalOrScientific:!1,errorOnDuplicatedKeys:!1,parseBigIntAsString:!1,alwaysParseAsBigInt:!1,protoAction:y.preserve,constructorAction:y.preserve};if(e){if((e.strict===!0||e.errorOnBigIntDecimalOrScientific===!0)&&(n.errorOnBigIntDecimalOrScientific=!0),(e.strict===!0||e.errorOnDuplicatedKeys===!0)&&(n.errorOnDuplicatedKeys=!0),e.parseBigIntAsString===!0&&(n.parseBigIntAsString=!0),e.alwaysParseAsBigInt===!0&&(n.alwaysParseAsBigInt=!0),e.protoAction)if(y.PROTO_ACTIONS.includes(e.protoAction))n.protoAction=e.protoAction;else throw new Error(`Incorrect value for protoAction option, must be ${y.PROTO_ACTIONS.map(a=>`"${a}"`).join(" or ")} but passed ${e.protoAction}`);if(e.constructorAction)if(y.CONSTRUCTOR_ACTIONS.includes(e.constructorAction))n.constructorAction=e.constructorAction;else throw new Error(`Incorrect value for constructorAction option, must be ${y.CONSTRUCTOR_ACTIONS.map(a=>`"${a}"`).join(" or ")} but passed ${e.constructorAction}`)}const u=a=>{throw{name:"SyntaxError",message:a,at:r,text:i}},h=a=>{if(a!==t)return u("Expected '"+a+"' instead of '"+t+"'")},o=a=>(t=i.charAt(++r),a&&h(a),t),s=()=>{for(;t&&t<=" ";)o()},p=a=>{const l=n.protoAction===y.preserve?Object.create(null):{};if(t==="{"){if(o(),s(),t==="}")return o(),l;for(;t;){const f=S(),v=(0,y.isNonNullObject)(a)&&!Array.isArray(a)?a[f]||a[Symbol.for("any")]:void 0;if(s(),h(":"),o(),n.errorOnDuplicatedKeys===!0&&Object.hasOwnProperty.call(l,f)&&u(`Duplicate key "${f}"`),_e.test(f)===!0?n.protoAction===y.error?u("Object contains forbidden prototype property"):n.protoAction===y.ignore?N():l[f]=N(v):me.test(f)===!0?n.constructorAction===y.error?u("Object contains forbidden constructor property"):n.constructorAction===y.ignore?N():l[f]=N(v):l[f]=N(v),s(),t==="}")return o(),n.protoAction===y.preserve&&Object.setPrototypeOf(l,Object.prototype),l;h(","),o(),s()}}return u("Bad object")},C=a=>{const l=[];if(t==="["){if(o(),s(),t==="]")return o(),l;const f=Array.isArray(a),v=f&&a.length>1;for(;t;){if(l.push(N(v?a[l.length]:f?a[0]:void 0)),s(),t==="]")return o(),l;h(","),o(),s()}}return u("Bad array")},S=()=>{let a="";if(t==='"'){let l=r+1;for(;o();){if(t==='"')return r>l&&(a+=i.substring(l,r)),o(),a;if(t==="\\"){if(r>l&&(a+=i.substring(l,r)),o(),t==="u"){let f=0;for(let v=0;v<4;v+=1){const g=parseInt(o(),16);if(!isFinite(g))break;f=f*16+g}a+=String.fromCharCode(f)}else if(typeof se[t]=="string")a+=se[t];else break;l=r+1}}}return u("Bad string")},O=(()=>{const a=new y.Cache;return l=>{let f="",v=!0;for(t==="-"&&(f=t,v=!1,o()),t==="0"&&(f+=t,o(),t>="0"&&t<="9"&&u("Bad number"));t>="0"&&t<="9";)f+=t,o();if(t===".")for(f+=t;o()&&t>="0"&&t<="9";)f+=t;if(t==="e"||t==="E")for(f+=t,o(),(t==="-"||t==="+")&&(f+=t,o());t>="0"&&t<="9";)f+=t,o();const g=l,m=a.get(f);if(!m||!m.has(g)){const b=m||a.set(f,new Map),A=Number(f);if(Number.isNaN(A))b.set(g,NaN);else if(!Number.isFinite(A))b.set(g,v?1/0:-1/0);else{const _=/[.eE]/.test(f);if(Number.isSafeInteger(A)||_)typeof l=="function"&&(l=l(A)),b.set(g,l===fe||!n.alwaysParseAsBigInt&&l!==Ne||_&&!n.errorOnBigIntDecimalOrScientific?A:_?u("Decimal and scientific notation cannot be bigint"):BigInt(f));else{let I;typeof l=="function"&&(I=BigInt(f),l=l(I)),l===fe?b.set(g,A):b.set(g,n.parseBigIntAsString?f:I||BigInt(f))}}}const j=a.get(f).get(g);return Number.isNaN(j)?u("Bad number"):j}})(),P=()=>{switch(t){case"t":return o("r"),o("u"),o("e"),o(),!0;case"f":return o("a"),o("l"),o("s"),o("e"),o(),!1;case"n":return o("u"),o("l"),o("l"),o(),null}return u(`Unexpected '${t}'`)},N=a=>{switch(s(),t){case"{":return p(a);case"[":return C(a);case'"':return S();case"-":return O(a);default:return t>="0"&&t<="9"?O(a):P()}};return(a,l,f)=>{r=-1,t=" ",i=String(a);const v=N(f);return s(),t&&u("Syntax error"),typeof l=="function"?function g(m,j){const b=m[j];if((0,y.isNonNullObject)(b)){const A=new Set;for(const _ in b){const I=Array.isArray(b)?[...b]:{...b};A.forEach(U=>delete I[U]);const F=g(I,_);A.add(_),F!==void 0?b[_]=F:delete b[_]}}return l.call(m,j,b)}({"":v},""):v}};q.newParse=je;var H={};Object.defineProperty(H,"__esModule",{value:!0});H.stringify=void 0;const oe=ie,Pe=e=>(0,oe.isNonNullObject)(e)&&typeof e.toJSON=="function",Z=e=>e instanceof Number?Number(e):e instanceof String?String(e):e,le=(()=>{const e=/[\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,r={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},t=new oe.Cache;return i=>(t.has(i)||(e.lastIndex=0,t.set(i,e.test(i)?'"'+i.replace(e,function(n){const u=r[n];return typeof u=="string"?u:"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+i+'"')),t.get(i))})();H.stringify=(()=>{const e=new Set;let r,t,i;const n=new Set,u=(h,o)=>{let s=h[o];switch(Pe(s)&&(s=s.toJSON()),typeof i=="function"&&(s=i.call(h,o.toString(),s)),typeof s){case"string":return le(s);case"number":return Number.isFinite(s)?s.toString():"null";case"boolean":case"bigint":return s.toString();case"object":{if(!s)return"null";if(e.has(s))throw new TypeError("cyclic object value");e.add(s);const p=r;if(r+=t,Array.isArray(s)){const O=s.map((N,a)=>u(s,a)||"null"),P=O.length===0?"[]":r?`[
`+r+O.join(`,
`+r)+`
`+p+"]":"["+O.join(",")+"]";return e.delete(s),r=p,P}const C=[];(n.size>0?n:Object.keys(s)).forEach(O=>{const P=u(s,O);P&&C.push(le(O)+(t?": ":":")+P)});const S=C.length===0?"{}":r?`{
`+r+C.join(`,
`+r)+`
`+p+"}":"{"+C.join(",")+"}";return e.delete(s),r=p,S}}};return(h,o,s)=>{h=Z(h),e.clear(),r="";const p=Z(s);return t=typeof p=="number"&&p>0?new Array(p+1).join(" "):typeof p!="string"?"":p.length>10?p.slice(0,10):p,n.clear(),Array.isArray(o)?(i=null,(0,oe.isNonNullObject)(h)&&o.forEach(C=>{const S=Z(C);if(typeof S=="string"||typeof S=="number"){const O=S.toString();n.has(O)||n.add(O)}})):i=o,u({"":h},"")}})();(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.stringify=e.parse=e.JSONB=void 0,process.on("unhandledRejection",(n,u)=>{console.error("Unhandled Rejection at:",u,"reason:",n),process.exit(1)});const r=q,t=H;Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return t.stringify}});const i=(0,r.newParse)();e.parse=i,e.JSONB=Object.assign(n=>({parse:(0,r.newParse)(n),stringify:t.stringify}),{parse:i,stringify:t.stringify})})(ee);function re(e){return re=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},re(e)}function de(e,r){for(var t=0;t<r.length;t++){var i=r[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ie(e,r,t){return r&&de(e.prototype,r),t&&de(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ee(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function Re(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),r&&k(e,r)}function Te(e){var r=ye();return function(){var i=D(e),n;if(r){var u=D(this).constructor;n=Reflect.construct(i,arguments,u)}else n=i.apply(this,arguments);return Be(this,n)}}function Be(e,r){if(r&&(re(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ke(e)}function ke(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function te(e){var r=typeof Map=="function"?new Map:void 0;return te=function(i){if(i===null||!De(i))return i;if(typeof i!="function")throw new TypeError("Super expression must either be null or a function");if(typeof r<"u"){if(r.has(i))return r.get(i);r.set(i,n)}function n(){return L(i,arguments,D(this).constructor)}return n.prototype=Object.create(i.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),k(n,i)},te(e)}function L(e,r,t){return ye()?L=Reflect.construct.bind():L=function(n,u,h){var o=[null];o.push.apply(o,u);var s=Function.bind.apply(n,o),p=new s;return h&&k(p,h.prototype),p},L.apply(null,arguments)}function ye(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function De(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function k(e,r){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},k(e,r)}function D(e){return D=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},D(e)}var E=function(e){Re(t,e);var r=Te(t);function t(i,n){var u;return Ee(this,t),u=r.call(this,i+" at position "+n),u.position=n,u}return Ie(t)}(te(Error)),$=92,G=47,Fe=42,he=123,Y=125,pe=91,x=93,Ue=40,Je=41,$e=32,ce=10,Oe=9,Ae=13,Me=8,Qe=12,K=34,ge=43,ve=45,We=39,ae=48,Le=49,ue=57,M=44,Ke=46,Ve=58,ze=59,qe=65,He=97,Xe=69,Ze=101,Ge=70,Ye=102,xe=160,er=8192,rr=8202,tr=8239,nr=8287,ir=12288,or=8220,cr=8221,ar=8216,ur=8217,fr=96,sr=180;function Q(e){return e>=ae&&e<=ue||e>=qe&&e<=Ge||e>=He&&e<=Ye}function W(e){return e>=ae&&e<=ue}function lr(e){return e>=Le&&e<=ue}function dr(e){return e>=32&&e<=1114111}function hr(e){return pr.test(e)||e&&z(e.charCodeAt(0))}var pr=/^[,:[\]{}()\n]$/;function be(e){return gr.test(e)||e&&z(e.charCodeAt(0))}var gr=/^[[{\w-]$/;function vr(e){return e===ce||e===Ae||e===Oe||e===Me||e===Qe}function V(e){return e===$e||e===ce||e===Oe||e===Ae}function br(e){return e===xe||e>=er&&e<=rr||e===tr||e===nr||e===ir}function z(e){return we(e)||ne(e)}function we(e){return e===K||e===or||e===cr}function ne(e){return e===We||e===ar||e===ur||e===fr||e===sr}function B(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=e.lastIndexOf(r);return i!==-1?e.substring(0,i)+(t?"":e.substring(i+1)):e}function R(e,r){var t=e.length;if(!V(e.charCodeAt(t-1)))return e+r;for(;V(e.charCodeAt(t-1));)t--;return e.substring(0,t)+r+e.substring(t)}function yr(e,r,t){return e.substring(0,r)+e.substring(r+t)}function Or(e){return/[,\n][ \t\r]*$/.test(e)}var Ar={"\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"},wr={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"};function Cr(e){var r=0,t="",i=u();i||_();var n=p(M);if(n&&h(),be(e[r])&&Or(t)?(n||(t=R(t,",")),N()):n&&(t=B(t,",")),r>=e.length)return t;A();function u(){h();var c=O()||P()||a()||f()||v()||m();return h(),c}function h(){var c=r,d=o();do d=s(),d&&(d=o());while(d);return r>c}function o(){for(var c="",d;(d=V(e.charCodeAt(r)))||br(e.charCodeAt(r));)d?c+=e[r]:c+=" ",r++;return c.length>0?(t+=c,!0):!1}function s(){if(e.charCodeAt(r)===G&&e.charCodeAt(r+1)===Fe){for(;r<e.length&&!Sr(e,r);)r++;return r+=2,!0}if(e.charCodeAt(r)===G&&e.charCodeAt(r+1)===G){for(;r<e.length&&e.charCodeAt(r)!==ce;)r++;return!0}return!1}function p(c){return e.charCodeAt(r)===c?(t+=e[r],r++,!0):!1}function C(c){return e.charCodeAt(r)===c?(r++,!0):!1}function S(){return C($)}function O(){if(e.charCodeAt(r)===he){t+="{",r++,h();for(var c=!0;r<e.length&&e.charCodeAt(r)!==Y;){var d=void 0;c?(d=!0,c=!1):(d=p(M),d||(t=R(t,",")),h());var w=a()||m();if(!w){e.charCodeAt(r)===Y||e.charCodeAt(r)===he||e.charCodeAt(r)===x||e.charCodeAt(r)===pe||e[r]===void 0?t=B(t,","):I();break}h();var J=p(Ve);J||(be(e[r])?t=R(t,":"):U());var T=u();T||(J?F():U())}return e.charCodeAt(r)===Y?(t+="}",r++):t=R(t,"}"),!0}return!1}function P(){if(e.charCodeAt(r)===pe){t+="[",r++,h();for(var c=!0;r<e.length&&e.charCodeAt(r)!==x;){if(c)c=!1;else{var d=p(M);d||(t=R(t,","))}var w=u();if(!w){t=B(t,",");break}}return e.charCodeAt(r)===x?(t+="]",r++):t=R(t,"]"),!0}return!1}function N(){for(var c=!0,d=!0;d;){if(c)c=!1;else{var w=p(M);w||(t=R(t,","))}d=u()}d||(t=B(t,",")),t=`[
`.concat(t,`
]`)}function a(){var c=e.charCodeAt(r)===$;if(c&&(r++,c=!0),z(e.charCodeAt(r))){var d=ne(e.charCodeAt(r))?ne:we;for(e.charCodeAt(r),t+='"',r++;r<e.length&&!d(e.charCodeAt(r));){if(e.charCodeAt(r)===$){var w=e[r+1],J=wr[w];J!==void 0?(t+=e.slice(r,r+2),r+=2):w==="u"?Q(e.charCodeAt(r+2))&&Q(e.charCodeAt(r+3))&&Q(e.charCodeAt(r+4))&&Q(e.charCodeAt(r+5))?(t+=e.slice(r,r+6),r+=6):Ce(r):(t+=w,r+=2)}else{var T=e[r],X=e.charCodeAt(r);X===K&&e.charCodeAt(r-1)!==$?(t+="\\"+T,r++):vr(X)?(t+=Ar[T],r++):(dr(X)||b(T),t+=T,r++)}c&&S()}return z(e.charCodeAt(r))?(e.charCodeAt(r),t+='"',r++):t+='"',l(),!0}return!1}function l(){var c=!1;for(h();e.charCodeAt(r)===ge;){c=!0,r++,h(),t=B(t,'"',!0);var d=t.length;a(),t=yr(t,d,1)}return c}function f(){var c=r;if(e.charCodeAt(r)===ve&&(r++,j(c)),e.charCodeAt(r)===ae)r++;else if(lr(e.charCodeAt(r)))for(r++;W(e.charCodeAt(r));)r++;if(e.charCodeAt(r)===Ke)for(r++,j(c);W(e.charCodeAt(r));)r++;if(e.charCodeAt(r)===Ze||e.charCodeAt(r)===Xe)for(r++,(e.charCodeAt(r)===ve||e.charCodeAt(r)===ge)&&r++,j(c);W(e.charCodeAt(r));)r++;return r>c?(t+=e.slice(c,r),!0):!1}function v(){return g("true","true")||g("false","false")||g("null","null")||g("True","true")||g("False","false")||g("None","null")}function g(c,d){return e.slice(r,r+c.length)===c?(t+=d,r+=c.length,!0):!1}function m(){for(var c=r;r<e.length&&!hr(e[r]);)r++;if(r>c){if(e.charCodeAt(r)===Ue)return r++,u(),e.charCodeAt(r)===Je&&(r++,e.charCodeAt(r)===ze&&r++),!0;for(;V(e.charCodeAt(r-1))&&r>0;)r--;var d=e.slice(c,r);return t+=JSON.stringify(d),!0}}function j(c){if(!W(e.charCodeAt(r))){var d=e.slice(c,r);throw new E("Invalid number '".concat(d,"', expecting a digit ").concat(Se()),2)}}function b(c){throw new E("Invalid character "+JSON.stringify(c),r)}function A(){throw new E("Unexpected character "+JSON.stringify(e[r]),r)}function _(){throw new E("Unexpected end of json string",e.length)}function I(){throw new E("Object key expected",r)}function F(){throw new E("Object value expected",r)}function U(){throw new E("Colon expected",r)}function Ce(c){for(var d=c+2;/\w/.test(e[d]);)d++;var w=e.slice(c,d);throw new E('Invalid unicode character "'.concat(w,'"'),r)}function Se(){return e[r]?"but got '".concat(e[r],"'"):"but reached end of input"}}function Sr(e,r){return e[r]==="*"&&e[r+1]==="/"}const Nr={parse:(e,{BIGINT_TO_STING:r=!1,JSON_REPAIR:t=!1}={})=>ee.parse(t?Cr(e):e,(i,n)=>r&&typeof n=="bigint"?n.toString():n),stringify:(e,r,t)=>ee.stringify(e,r,t)};export{Nr as J,Cr as j};
