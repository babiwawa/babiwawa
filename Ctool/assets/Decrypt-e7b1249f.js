import{u as k,i as C}from"./action-dcd662bd.js";import{c as T,a as A,T as a}from"./index-4f369466.js";import{s as H}from"./index-636623a5.js";import{A as I,bi as D,k as E,m,bj as l,aF as r,aG as S,as as d,x as p,a$ as o,bl as U}from"./history-5e0c3cab.js";import"./_commonjsHelpers-87174ba5.js";import"./index-69be48ff.js";const F=I({__name:"Decrypt",async setup($){let i,s;const e=k(([i,s]=D(()=>C({input:T("hex"),option:{private_key:"",cipher_mode:1},output:A("text")})),i=await i,s(),i)),_=E(()=>{if(e.current.input.text.isEmpty()||e.current.option.private_key==="")return a.empty();try{if(e.current.input.text.isError())return e.current.input.text;let u=H.sm2.doDecrypt(e.current.input.text.toHexString(),e.current.option.private_key,e.current.option.cipher_mode,{output:"array"});if(u==="")throw new Error("failure");return a.fromArray(u)}catch(u){return a.fromError($error(u))}});return(u,t)=>{const x=r("TextInput"),f=r("Input"),v=r("Select"),y=r("HelpTip"),c=r("Align"),h=r("TextOutput"),g=r("HeightResize"),V=S("row");return d(),m(g,{ignore:"",append:[".ctool-page-option"],reduce:10},{default:l(({small:w,large:b})=>[p(c,{direction:"vertical"},{default:l(()=>[p(x,{modelValue:o(e).current.input,"onUpdate:modelValue":t[0]||(t[0]=n=>o(e).current.input=n),allow:["base64","hex"],height:w},null,8,["modelValue","height"]),U((d(),m(c,{class:"ctool-page-option"},{default:l(()=>[p(f,{modelValue:o(e).current.option.private_key,"onUpdate:modelValue":t[1]||(t[1]=n=>o(e).current.option.private_key=n),label:u.$t("sm2_private_key")},null,8,["modelValue","label"]),p(v,{options:[{value:1,label:"C1-C3-C2"},{value:0,label:"C1-C2-C3"}],modelValue:o(e).current.option.cipher_mode,"onUpdate:modelValue":t[2]||(t[2]=n=>o(e).current.option.cipher_mode=n)},null,8,["modelValue"]),p(y,{link:"https://github.com/JuneAndGreen/sm-crypto"})]),_:1})),[[V,"1-auto-auto"]]),p(h,{modelValue:o(e).current.output,"onUpdate:modelValue":t[3]||(t[3]=n=>o(e).current.output=n),allow:["text","hex","base64","image","down"],content:_.value,height:b,onSuccess:t[4]||(t[4]=n=>o(e).save())},null,8,["modelValue","content","height"])]),_:2},1024)]),_:1},8,["append"])}}});export{F as default};
